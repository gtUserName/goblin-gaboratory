{"source":"webpackJsonp([0],{68:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(262),d=n.n(r),v=n(504);t.default={namespace:\"project\",state:{roleInfo:void 0,loading:!1},subscriptions:{setup:function(e){var n=e.dispatch;return e.history.listen(function(e){var t=e.pathname.match(/\\/p\\/([^/]+)(\\/.*)?/);t&&n({type:\"init\",payload:{projectName:t[1]}})})}},effects:{reset:d.a.mark(function e(t,n){t.payload,n.call;var r=n.put;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({type:\"save\",payload:{roleInfo:void 0,loading:!1}});case 2:case\"end\":return e.stop()}},e,this)}),init:d.a.mark(function e(t,n){var r,a,o=t.payload,s=(n.call,n.put),c=n.select;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(function(e){return e.project});case 2:if(r=e.sent,!(a=r.roleInfo)||a.project_name!==o.projectName){e.next=6;break}return e.abrupt(\"return\");case 6:return e.next=8,s({type:\"getRoleInfo\",payload:o});case 8:case\"end\":return e.stop()}},e,this)}),getRoleInfo:d.a.mark(function e(t,n){var r,a,o,s,c,u,p=t.payload,i=n.call,l=n.put,f=n.select;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(function(e){return e.loading});case 2:if(r=e.sent,!r.loading){e.next=6;break}return e.abrupt(\"return\");case 6:return e.next=8,l({type:\"save\",payload:{roleInfo:void 0,loading:!0}});case 8:return e.next=10,f(function(e){return e.client});case 10:return a=e.sent,o=a.userInfo,e.next=14,i(v.a.getUserRole,{username:o.username,projectName:p.projectName});case 14:return s=e.sent,c=s.data,u=s.errMsg,e.next=19,l({type:\"save\",payload:{loading:!1,roleInfo:c||null}});case 19:if(!u||!u.response||404!==u.response.status){e.next=22;break}return e.next=22,l({type:\"client/getUserResource\"});case 22:case\"end\":return e.stop()}},e,this)})},reducers:{save:function(e,t){return Object.assign({},e,t.payload)}}}}});"}