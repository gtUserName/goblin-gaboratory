{"source":"webpackJsonp([42],{1369:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=t(262),v=t.n(n),m=t(1391),y=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,a=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(t.push(c.value),!r||t.length!==r);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t}(e,r);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};function i(e,r){var t={};for(var n in e)0<=r.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}r.default={namespace:\"project-account\",state:{account:void 0,storageQuota:void 0,quota:void 0,onlineSchoolConfig:void 0,wechatMerchant:void 0,loading:!1},subscriptions:{setup:function(e){var t=e.dispatch;return e.history.listen(function(e){var r=e.pathname.match(/^\\/projects\\/([\\w-]+)\\/account$/);if(r)return t({type:\"load\",payload:{projectName:r[1]}})})}},effects:{load:v.a.mark(function e(r,t){var n,a,o,c,u,s,p,i,f=r.payload,l=t.call,h=t.put,d=t.select;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(function(e){return e[\"project-account\"]});case 2:if(n=e.sent,!n.loading){e.next=6;break}return e.abrupt(\"return\",!1);case 6:return e.next=8,h({type:\"save\",payload:{loading:!0,account:void 0,storageQuota:void 0,quota:void 0,onlineSchoolConfig:void 0,wechatMerchant:void 0}});case 8:return e.next=10,[l(m.a.getAccount,f),l(m.a.getStorageQuota,f),l(m.a.getQuota,f),l(m.a.getOnlineSchoolConfig,f),l(m.a.getWechatMerchant,f)];case 10:return a=e.sent,o=y(a,5),c=o[0],u=o[1],s=o[2],p=o[3],i=o[4],e.next=19,h({type:\"save\",payload:{loading:!1,account:c.data||null,storageQuota:u.data||null,quota:s.data||null,onlineSchoolConfig:p.data||null,wechatMerchant:i.data||null}});case 19:case\"end\":return e.stop()}},e,this)}),getProjectInfo:v.a.mark(function e(r,t){var n,a,o=r.payload,c=t.put,u=t.select;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(function(e){return e.projects});case 2:if(n=e.sent,!(a=n.info)||o.projectName!==a.name){e.next=6;break}return e.abrupt(\"return\");case 6:return e.next=8,c({type:\"refreshProjectInfo\",payload:o});case 8:case\"end\":return e.stop()}},e,this)}),refreshProjectInfo:v.a.mark(function e(r,t){var n,a,o=r.payload,c=t.call,u=t.put;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:\"save\",payload:{info:void 0}});case 2:return e.next=4,c(m.a.getProjectInfo,o);case 4:return n=e.sent,a=n.data,e.next=8,u({type:\"save\",payload:{info:a||null}});case 8:case\"end\":return e.stop()}},e,this)}),updateInfo:v.a.mark(function e(r,t){var n,a,o,c,u=r.payload,s=t.put,p=t.select;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(function(e){return e.projects});case 2:if(n=e.sent,a=n.info,o=u.projectName,c=i(u,[\"projectName\"]),!a||o!==a.name){e.next=8;break}return e.next=8,s({type:\"save\",payload:{info:Object.assign({},a,c)}});case 8:case\"end\":return e.stop()}},e,this)})},reducers:{save:function(e,r){return Object.assign({},e,r.payload)}}}},1391:function(e,r,t){\"use strict\";var n=t(262),o=t.n(n),a=t(507);function c(e,r){var t={};for(var n in e)0<=r.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function u(e){return function(){var u=e.apply(this,arguments);return new Promise(function(o,c){return function r(e,t){try{var n=u[e](t),a=n.value}catch(e){return void c(e)}if(!n.done)return Promise.resolve(a).then(function(e){r(\"next\",e)},function(e){r(\"throw\",e)});o(a)}(\"next\")})}}var s,p,i,f,l,h,d,v,m,y,j,w,g,x,b,N,k,P=function(){return Object(a.a)(\"/projects/:projectName/:resourcetype/:resourceId/:subType/:subId\")};r.a={addVirtualCamera:(k=u(o.a.mark(function e(r){var t=r.projectName,n=c(r,[\"projectName\"]);return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().post({projectName:t,resourcetype:\"add_virtual_camera\"},n));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)}),getStorageQuota:(N=u(o.a.mark(function e(r){var t=r.projectName;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"storage_quota\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)}),getProjects:(b=u(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(r));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)}),getProjectInfo:(x=u(o.a.mark(function e(r){var t=r.projectName;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)}),updateProjectInfo:(g=u(o.a.mark(function e(r){var t=r.projectName,n=c(r,[\"projectName\"]);return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().put({projectName:t},n));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)}),getAccount:(w=u(o.a.mark(function e(r){var t=r.projectName;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"account\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)}),getQuota:(j=u(o.a.mark(function e(r){var t=r.projectName;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"quota\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return j.apply(this,arguments)}),getOnlineSchoolConfig:(y=u(o.a.mark(function e(r){var t=r.projectName;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"online_school\",resourceId:\"config\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)}),getWechatMerchant:(m=u(o.a.mark(function e(r){var t=r.projectName;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"wechat_merchant\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)}),getProjectUsers:(v=u(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(Object.assign({},r,{resourcetype:\"users\"})));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)}),getProjectUserInfo:(d=u(o.a.mark(function e(r){var t=r.projectName,n=r.username;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"users\",resourceId:n}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)}),addProjectUser:(h=u(o.a.mark(function e(r){var t=r.projectName,n=r.username,a=r.role;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().post({projectName:t,resourcetype:\"users\"},{username:n,role:a}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)}),removeProjectUser:(l=u(o.a.mark(function e(r){var t=r.projectName,n=r.username;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().remove({projectName:t,resourcetype:\"users\",resourceId:n}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)}),getProjectUserRoles:(f=u(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(Object.assign({},r,{resourcetype:\"user_roles\"})));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)}),getProjectUserRole:(i=u(o.a.mark(function e(r){var t=r.projectName,n=r.username;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"user_roles\",resourceId:n}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),updateProjectUserRole:(p=u(o.a.mark(function e(r){var t=r.projectName,n=r.username,a=r.role;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().put({projectName:t,resourcetype:\"user_roles\",resourceId:n},{role:a}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)}),getProjectDevices:(s=u(o.a.mark(function e(r){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(Object.assign({},r,{resourcetype:\"devices\"})));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})}}});"}