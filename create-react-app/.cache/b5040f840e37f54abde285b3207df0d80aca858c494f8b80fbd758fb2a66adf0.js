{"source":"webpackJsonp([2],{1437:function(t,e,r){\"use strict\";var n=r(262),o=r.n(n),a=r(507);function s(t){return function(){var c=t.apply(this,arguments);return new Promise(function(o,s){return function e(t,r){try{var n=c[t](r),a=n.value}catch(t){return void s(t)}if(!n.done)return Promise.resolve(a).then(function(t){e(\"next\",t)},function(t){e(\"throw\",t)});o(a)}(\"next\")})}}var c,u,i,p,d,h,f,w,l,v,y,m,g=function(){return Object(a.a)(\"/projects/:projectName/live_shows/:showId/:type/:subId\")},j=function(){return Object(a.a)(\"/projects/:projectName/live_show/:resourceType/:resourceId/live_shows\")};e.a={getShows:(m=s(o.a.mark(function t(e){var r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={projectName:e.projectName,start:e.start,limit:e.limit},\"string\"==typeof e.keyword&&\"\"!==e.keyword&&(r.keyword=e.keyword),t.abrupt(\"return\",g().get(r));case 3:case\"end\":return t.stop()}},t,this)})),function(t){return m.apply(this,arguments)}),getShow:(y=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().get({projectName:r,showId:n}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return y.apply(this,arguments)}),getShowTags:(v=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().get({projectName:r,showId:n,type:\"tags\"}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return v.apply(this,arguments)}),getShowStatistic:(l=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().get({projectName:r,showId:n,type:\"statistic\"}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return l.apply(this,arguments)}),getLiveStatistics:(w=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().get({projectName:r,showId:n,type:\"lives\"}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return w.apply(this,arguments)}),getShowRecords:(f=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().get({projectName:r,showId:n,type:\"records\"}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return f.apply(this,arguments)}),removeShowRecord:(h=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId,a=e.eventId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().remove({projectName:r,showId:n,type:\"records\",subId:a}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return h.apply(this,arguments)}),addShowRecords:(d=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId,a=e.events;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().post({projectName:r,showId:n,type:\"records\"},a));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return d.apply(this,arguments)}),getShowSchedules:(p=s(o.a.mark(function t(e){var r=e.projectName,n=e.start,a=e.limit;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",j().get({projectName:r,resourceType:\"live_show_schedules\",start:n,limit:a}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return p.apply(this,arguments)}),getShowsByEvent:(i=s(o.a.mark(function t(e){var r=e.projectName,n=e.eventId;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",j().get({projectName:r,resourceType:\"events\",resourceId:n}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)}),changeShowState:(u=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId,a=e.op;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().post({projectName:r,showId:n},{op:a}));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return u.apply(this,arguments)}),updateShowInfo:(c=s(o.a.mark(function t(e){var r=e.projectName,n=e.showId,a=function(t,e){var r={};for(var n in t)0<=e.indexOf(n)||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}(e,[\"projectName\",\"showId\"]);return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt(\"return\",g().put({projectName:r,showId:n},a));case 1:case\"end\":return t.stop()}},t,this)})),function(t){return c.apply(this,arguments)})}},497:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(262),w=r.n(n),a=r(265),u=r.n(a),l=r(1437),d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(n=(s=c.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(a)throw o}}return r}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")};e.default={namespace:\"shows\",state:{pageSize:20,list:[],page:1,total:void 0,keyword:void 0,loading:!1,info:void 0,tags:void 0,statistic:void 0},subscriptions:{setup:function(t){var a=t.dispatch;return t.history.listen(function(t){var e=t.pathname,r=e.match(/^\\/p\\/([\\w-]+)\\/shows$/);if(r)return a({type:\"init\",payload:r[1]});var n=e.match(/^\\/p\\/([\\w-]+)\\/shows\\/([\\w-]+)\\//);return n?a({type:\"getShowInfo\",payload:{projectName:n[1],showId:n[2]}}):void 0})}},effects:{init:w.a.mark(function t(e,r){var n,a,o,s=e.payload,c=(r.call,r.put);r.select;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.a.parseUrl(window.location.href),a=n.query,o=parseInt(a.page||1,10),t.next=4,c({type:\"save\",payload:{keyword:a.keyword,page:o}});case 4:return t.next=6,c({type:\"save\",payload:{list:[],total:void 0}});case 6:return t.next=8,c({type:\"load\",payload:s});case 8:case\"end\":return t.stop()}},t,this)}),load:w.a.mark(function t(e,r){e.payload;var n,a,o,s,c,u,i,p,d=r.call,h=r.put,f=r.select;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(function(t){return t.shows});case 2:if(n=t.sent,a=n.page,o=n.pageSize,s=n.keyword,!n.loading){t.next=9;break}return t.abrupt(\"return\");case 9:return t.next=11,h({type:\"save\",payload:{loading:!0}});case 11:return t.next=13,f(function(t){return t.client});case 13:return c=t.sent,u=c.selected,t.next=17,d(l.a.getShows,{projectName:u,keyword:s,start:(a-1)*o,limit:o});case 17:return i=t.sent,p=i.data,i.err,t.next=22,h({type:\"save\",payload:{loading:!1}});case 22:if(!p){t.next=26;break}return t.next=26,h({type:\"save\",payload:{list:p.list,total:p.total}});case 26:case\"end\":return t.stop()}},t,this)}),getShowInfo:w.a.mark(function t(e,r){var n,a,o=e.payload,s=r.put,c=r.select;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(function(t){return t.shows});case 2:if(n=t.sent,(a=n.info)&&o.showId===a.uuid){t.next=7;break}return t.next=7,s({type:\"refreshShowInfo\",payload:o});case 7:case\"end\":return t.stop()}},t,this)}),refreshShowInfo:w.a.mark(function t(e,r){var n,a,o,s,c,u=e.payload,i=r.call,p=r.put;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({type:\"save\",payload:{info:void 0,tags:void 0,statistic:void 0}});case 2:return t.next=4,[i(l.a.getShow,u),i(l.a.getShowTags,u),i(l.a.getShowStatistic,u)];case 4:return n=t.sent,a=d(n,3),o=a[0],s=a[1],c=a[2],t.next=11,p({type:\"save\",payload:{info:o.data||null,tags:s.data||null,statistic:c.data||null}});case 11:case\"end\":return t.stop()}},t,this)})},reducers:{save:function(t,e){return Object.assign({},t,e.payload)}}}}});"}