{"source":"webpackJsonp([1],{1391:function(e,r,t){\"use strict\";var n=t(262),c=t.n(n),a=t(507);function s(e,r){var t={};for(var n in e)0<=r.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function o(e){return function(){var o=e.apply(this,arguments);return new Promise(function(c,s){return function r(e,t){try{var n=o[e](t),a=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(a).then(function(e){r(\"next\",e)},function(e){r(\"throw\",e)});c(a)}(\"next\")})}}var u,p,i,f,l,v,d,h,y,m,j,g,w,x,b,N,k,P=function(){return Object(a.a)(\"/projects/:projectName/:resourcetype/:resourceId/:subType/:subId\")};r.a={addVirtualCamera:(k=o(c.a.mark(function e(r){var t=r.projectName,n=s(r,[\"projectName\"]);return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().post({projectName:t,resourcetype:\"add_virtual_camera\"},n));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)}),getStorageQuota:(N=o(c.a.mark(function e(r){var t=r.projectName;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"storage_quota\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return N.apply(this,arguments)}),getProjects:(b=o(c.a.mark(function e(r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(r));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)}),getProjectInfo:(x=o(c.a.mark(function e(r){var t=r.projectName;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return x.apply(this,arguments)}),updateProjectInfo:(w=o(c.a.mark(function e(r){var t=r.projectName,n=s(r,[\"projectName\"]);return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().put({projectName:t},n));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return w.apply(this,arguments)}),getAccount:(g=o(c.a.mark(function e(r){var t=r.projectName;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"account\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)}),getQuota:(j=o(c.a.mark(function e(r){var t=r.projectName;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"quota\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return j.apply(this,arguments)}),getOnlineSchoolConfig:(m=o(c.a.mark(function e(r){var t=r.projectName;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"online_school\",resourceId:\"config\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)}),getWechatMerchant:(y=o(c.a.mark(function e(r){var t=r.projectName;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"wechat_merchant\"}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)}),getProjectUsers:(h=o(c.a.mark(function e(r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(Object.assign({},r,{resourcetype:\"users\"})));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)}),getProjectUserInfo:(d=o(c.a.mark(function e(r){var t=r.projectName,n=r.username;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"users\",resourceId:n}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return d.apply(this,arguments)}),addProjectUser:(v=o(c.a.mark(function e(r){var t=r.projectName,n=r.username,a=r.role;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().post({projectName:t,resourcetype:\"users\"},{username:n,role:a}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)}),removeProjectUser:(l=o(c.a.mark(function e(r){var t=r.projectName,n=r.username;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().remove({projectName:t,resourcetype:\"users\",resourceId:n}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)}),getProjectUserRoles:(f=o(c.a.mark(function e(r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(Object.assign({},r,{resourcetype:\"user_roles\"})));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)}),getProjectUserRole:(i=o(c.a.mark(function e(r){var t=r.projectName,n=r.username;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get({projectName:t,resourcetype:\"user_roles\",resourceId:n}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),updateProjectUserRole:(p=o(c.a.mark(function e(r){var t=r.projectName,n=r.username,a=r.role;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().put({projectName:t,resourcetype:\"user_roles\",resourceId:n},{role:a}));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return p.apply(this,arguments)}),getProjectDevices:(u=o(c.a.mark(function e(r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",P().get(Object.assign({},r,{resourcetype:\"devices\"})));case 1:case\"end\":return e.stop()}},e,this)})),function(e){return u.apply(this,arguments)})}},96:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=t(262),d=t.n(n),a=t(265),o=t.n(a),u=t(95),h=t(1391),p=t(508);function i(e,r){var t={};for(var n in e)0<=r.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}r.default={namespace:\"projects\",state:{pageSize:20,list:[],page:1,total:void 0,filterKey:\"title\",filterValue:\"\",loading:!1,info:void 0,saving:!1},subscriptions:{setup:function(e){var a=e.dispatch;return e.history.listen(function(e){var r=e.pathname,t=e.search;if(\"/projects\"===r)return a({type:\"init\",payload:{search:t}});var n=r.match(/^\\/projects\\/([\\w-]+)\\//);return n?a({type:\"getProjectInfo\",payload:{projectName:n[1]}}):void 0})}},effects:{init:d.a.mark(function e(r,t){var n,a,c=r.payload,s=t.put;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.a.parse(c.search),a=parseInt(n.page||1,10),e.next=4,s({type:\"save\",payload:{filterKey:n.k||\"title\",filterValue:n.v||\"\",page:a}});case 4:return e.next=6,s({type:\"save\",payload:{list:[],total:void 0}});case 6:return e.next=8,s({type:\"load\",payload:c});case 8:case\"end\":return e.stop()}},e,this)}),load:d.a.mark(function e(r,t){r.payload;var n,a,c,s,o,u,p,i,f=t.call,l=t.put,v=t.select;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(function(e){return e.projects});case 2:if(n=e.sent,a=n.page,c=n.pageSize,s=n.filterKey,o=n.filterValue,!n.loading){e.next=10;break}return e.abrupt(\"return\");case 10:return e.next=12,l({type:\"save\",payload:{loading:!0}});case 12:return u=o?{filter_key:s,filter_value:o}:{},e.next=15,f(h.a.getProjects,Object.assign({start:(a-1)*c,limit:c},u));case 15:return p=e.sent,i=p.data,p.errMsg,e.next=20,l({type:\"save\",payload:{loading:!1,list:i&&i.list||null,total:i&&i.total}});case 20:case 21:case\"end\":return e.stop()}},e,this)}),getProjectInfo:d.a.mark(function e(r,t){var n,a,c=r.payload,s=t.put,o=t.select;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(function(e){return e.projects});case 2:if(n=e.sent,!(a=n.info)||c.projectName!==a.name){e.next=6;break}return e.abrupt(\"return\");case 6:return e.next=8,s({type:\"refreshProjectInfo\",payload:c});case 8:case\"end\":return e.stop()}},e,this)}),refreshProjectInfo:d.a.mark(function e(r,t){var n,a,c=r.payload,s=t.call,o=t.put;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:\"save\",payload:{info:void 0}});case 2:return e.next=4,s(h.a.getProjectInfo,c);case 4:return n=e.sent,a=n.data,e.next=8,o({type:\"save\",payload:{info:a||null}});case 8:case\"end\":return e.stop()}},e,this)}),saveProjectInfo:d.a.mark(function e(r,t){var n,a,c=r.payload,s=t.put,o=t.call;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({type:\"save\",payload:{saving:!0}});case 2:return e.next=4,o(h.a.updateProjectInfo,c);case 4:return n=e.sent,a=n.errMsg,e.next=8,s({type:\"save\",payload:{saving:!1}});case 8:if(!a){e.next=12;break}Object(p.c)(a,\"修改商户信息失败\"),e.next=15;break;case 12:return e.next=14,s({type:\"saveProjectInfo\",payload:c});case 14:u.F.success({message:\"修改录像信息成功\"});case 15:case\"end\":return e.stop()}},e,this)}),updateProjectInfo:d.a.mark(function e(r,t){var n,a,c,s,o=r.payload,u=t.put,p=t.select;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(function(e){return e.projects});case 2:if(n=e.sent,a=n.info,c=o.projectName,s=i(o,[\"projectName\"]),!a||c!==a.name){e.next=8;break}return e.next=8,u({type:\"save\",payload:{info:Object.assign({},a,s)}});case 8:case\"end\":return e.stop()}},e,this)})},reducers:{save:function(e,r){return Object.assign({},e,r.payload)}}}}});"}