{"version":3,"sources":["services/project.js","models/admin/projects.js"],"names":["projects","Object","__WEBPACK_IMPORTED_MODULE_1__utils_resource__","__webpack_exports__","addVirtualCamera","_ref2","_asyncToGenerator","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","mark","_callee","_ref","projectName","data","_objectWithoutProperties","wrap","_context","prev","next","abrupt","post","resourcetype","stop","this","_x","apply","arguments","getStorageQuota","_ref4","_callee2","_ref3","_context2","get","_x2","getProjects","_ref5","_callee3","params","_context3","_x3","getProjectInfo","_ref7","_callee4","_ref6","_context4","_x4","updateProjectInfo","_ref9","_callee5","_ref8","_context5","put","_x5","getAccount","_ref11","_callee6","_ref10","_context6","_x6","getQuota","_ref13","_callee7","_ref12","_context7","_x7","getOnlineSchoolConfig","_ref15","_callee8","_ref14","_context8","resourceId","_x8","getWechatMerchant","_ref17","_callee9","_ref16","_context9","_x9","getProjectUsers","_ref18","_callee10","_context10","assign","_x10","getProjectUserInfo","_ref20","_callee11","_ref19","username","_context11","_x11","addProjectUser","_ref22","_callee12","_ref21","role","_context12","_x12","removeProjectUser","_ref24","_callee13","_ref23","_context13","remove","_x13","getProjectUserRoles","_ref25","_callee14","_context14","_x14","getProjectUserRole","_ref27","_callee15","_ref26","_context15","_x15","updateProjectUserRole","_ref29","_callee16","_ref28","_context16","_x16","getProjectDevices","_ref30","_callee17","_context17","_x17","namespace","state","pageSize","list","page","total","undefined","filterKey","filterValue","loading","info","saving","subscriptions","setup","dispatch","history","listen","pathname","search","type","payload","match","effects","init","parsed","__WEBPACK_IMPORTED_MODULE_1_query_string___default","parse","parseInt","k","v","load","call","select","sent","filter_key","filter_value","__WEBPACK_IMPORTED_MODULE_3__services_project__","start","limit","errMsg","name","refreshProjectInfo","saveProjectInfo","__WEBPACK_IMPORTED_MODULE_4__utils__","__WEBPACK_IMPORTED_MODULE_2_antd__","success","message","newData","reducers","save","action"],"mappings":"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","file":"static/js/1.03e33bb5.chunk.js","sourcesContent":["\r\nimport resource from '../utils/resource';\r\n\r\nconst projects = () => {\r\n  return resource('/projects/:projectName/:resourcetype/:resourceId/:subType/:subId');\r\n};\r\n// const storageQuota = () => {\r\n//   return resource('/projects/:projectName/storage_quota');\r\n// };\r\n\r\nexport default {\r\n  async addVirtualCamera({ projectName, ...data }) {\r\n    return projects().post({ projectName, resourcetype: 'add_virtual_camera' }, data);\r\n  },\r\n  async getStorageQuota({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'storage_quota' });\r\n  },\r\n  async getProjects(params) {\r\n    return projects().get(params);\r\n  },\r\n  async getProjectInfo({ projectName }) {\r\n    return projects().get({ projectName });\r\n  },\r\n  async updateProjectInfo({ projectName, ...data }) {\r\n    return projects().put({ projectName }, data);\r\n  },\r\n  async getAccount({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'account' });\r\n  },\r\n  async getQuota({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'quota' });\r\n  },\r\n  async getOnlineSchoolConfig({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'online_school', resourceId: 'config' });\r\n  },\r\n  async getWechatMerchant({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'wechat_merchant' });\r\n  },\r\n  async getProjectUsers(params) {\r\n    return projects().get({ ...params, resourcetype: 'users' });\r\n  },\r\n  async getProjectUserInfo({ projectName, username }) {\r\n    return projects().get({ projectName, resourcetype: 'users', resourceId: username });\r\n  },\r\n  async addProjectUser({ projectName, username, role }) {\r\n    return projects().post({ projectName, resourcetype: 'users' }, { username, role });\r\n  },\r\n  async removeProjectUser({ projectName, username }) {\r\n    return projects().remove({ projectName, resourcetype: 'users', resourceId: username });\r\n  },\r\n  async getProjectUserRoles(params) {\r\n    return projects().get({ ...params, resourcetype: 'user_roles' });\r\n  },\r\n  async getProjectUserRole({ projectName, username }) {\r\n    return projects().get({ projectName, resourcetype: 'user_roles', resourceId: username });\r\n  },\r\n  async updateProjectUserRole({ projectName, username, role }) {\r\n    return projects().put({ projectName, resourcetype: 'user_roles', resourceId: username }, { role });\r\n  },\r\n  async getProjectDevices(params) {\r\n    return projects().get({ ...params, resourcetype: 'devices' });\r\n  },\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/project.js","import queryString from 'query-string';\nimport { notification } from 'antd';\nimport projectService from '../../services/project';\nimport { notifyRequestError } from '../../utils';\n\n\nexport default {\n  namespace: 'projects',\n  state: {\n    pageSize: 20,\n    list: [],\n    page: 1,\n    total: undefined,\n    filterKey: 'title',\n    filterValue: '',\n    loading: false,\n    info: undefined,\n    saving: false,\n  },\n\n  subscriptions: {\n    setup({ dispatch, history }) {\n      return history.listen(({ pathname, search }) => {\n        if ('/projects' === pathname) {\n          return dispatch({ type: 'init', payload: { search } });\n        }\n        const match = pathname.match(/^\\/projects\\/([\\w-]+)\\//);\n        if (match) {\n          return dispatch({ type: 'getProjectInfo', payload: { projectName: match[1] } });\n        }\n      });\n    },\n  },\n\n  effects: {\n    *init({ payload }, { put }) {\n      const parsed = queryString.parse(payload.search);\n      const page = parseInt(parsed.page || 1, 10);\n      yield put({ type: 'save', payload: { filterKey: parsed.k || 'title', filterValue: parsed.v || '', page } });\n      yield put({ type: 'save', payload: { list: [], total: undefined } });\n      yield put({ type: 'load', payload });\n    },\n    *load({ payload }, { call, put, select }) {\n      const { page, pageSize, filterKey, filterValue, loading } = yield select(state => state.projects);\n      if (loading) {\n        return;\n      }\n      yield put({ type: 'save', payload: { loading: true } });\n      const params = filterValue ? { filter_key: filterKey, filter_value: filterValue } : {};\n      const { data, errMsg } = yield call(projectService.getProjects, {\n        start: (page - 1) * pageSize,\n        limit: pageSize,\n        ...params,\n      });\n      yield put({ type: 'save', payload: { loading: false, list: (data && data.list) || null, total: (data && data.total) } });\n      if (errMsg) {\n        // TODO: 获取商户列表失败提示\n      }\n    },\n    *getProjectInfo({ payload }, { put, select }) {\n      const { info } = yield select(state => state.projects);\n      if (info && payload.projectName === info.name) {\n        return;\n      }\n      yield put({ type: 'refreshProjectInfo', payload });\n    },\n    *refreshProjectInfo({ payload }, { call, put }) {\n      yield put({ type: 'save', payload: { info: undefined } });\n      const { data } = yield call(projectService.getProjectInfo, payload);\n      yield put({ type: 'save', payload: { info: data || null } });\n    },\n    *saveProjectInfo({ payload }, { put, call }) {\n      yield put({ type: 'save', payload: { saving: true } });\n      const { errMsg } = yield call(projectService.updateProjectInfo, payload);\n      yield put({ type: 'save', payload: { saving: false } });\n      if (errMsg) {\n        notifyRequestError(errMsg, '修改商户信息失败');\n      } else {\n        yield put({ type: 'saveProjectInfo', payload });\n        notification.success({ message: '修改录像信息成功' });\n      }\n    },\n    *updateProjectInfo({ payload }, { put, select }) {\n      const { info } = yield select(state => state.projects);\n      const { projectName, ...newData } = payload;\n      if (info && projectName === info.name) {\n        yield put({ type: 'save', payload: { info: { ...info, ...newData } } });\n      }\n    },\n  },\n\n  reducers: {\n    save(state, action) {\n      return { ...state, ...action.payload };\n    },\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/admin/projects.js"],"sourceRoot":""}