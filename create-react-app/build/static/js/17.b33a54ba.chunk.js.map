{"version":3,"sources":["models/admin/projectUsers.js","services/project.js"],"names":["__webpack_exports__","namespace","state","roles","undefined","pageSize","list","page","total","loading","info","role","saving","subscriptions","setup","_ref","dispatch","history","listen","_ref2","pathname","search","match","type","payload","projectName","matchObj","username","effects","init","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","a","mark","_ref3","_ref4","parsed","put","wrap","_context","prev","next","__WEBPACK_IMPORTED_MODULE_1_query_string___default","parse","parseInt","stop","this","getUserRoles","_ref5","_ref6","_ref7","_ref8","data","errMsg","call","select","_context2","sent","length","project_name","abrupt","__WEBPACK_IMPORTED_MODULE_3__services_project__","getProjectUserRoles","Object","__WEBPACK_IMPORTED_MODULE_4__utils__","load","_ref9","_ref10","_ref11","_ref12","_context3","getProjectUsers","start","limit","mergeUserRoles","_ref13","_ref14","_ref15","_context4","map","it","find","item","assign","getUserInfo","_ref16","_ref17","_ref18","_context5","projects","refreshUserInfo","_ref19","_ref20","_ref21","_context6","getProjectUserInfo","refreshUserRole","_ref22","_ref23","_ref24","_context7","getProjectUserRole","saveUserInfo","_ref25","_ref26","_ref27","_context8","updateProjectInfo","__WEBPACK_IMPORTED_MODULE_2_antd__","success","message","updateUserInfo","_ref28","_ref29","_ref30","newData","_context9","_objectWithoutProperties","name","reducers","save","action","__WEBPACK_IMPORTED_MODULE_1__utils_resource__","addVirtualCamera","_asyncToGenerator","_callee","post","resourcetype","_x","apply","arguments","getStorageQuota","_callee2","get","_x2","getProjects","_callee3","params","_x3","getProjectInfo","_callee4","_x4","_callee5","_x5","getAccount","_callee6","_x6","getQuota","_callee7","_x7","getOnlineSchoolConfig","_callee8","resourceId","_x8","getWechatMerchant","_callee9","_x9","_callee10","_context10","_x10","_callee11","_context11","_x11","addProjectUser","_callee12","_context12","_x12","removeProjectUser","_callee13","_context13","remove","_x13","_callee14","_context14","_x14","_callee15","_context15","_x15","updateProjectUserRole","_callee16","_context16","_x16","getProjectDevices","_callee17","_context17","_x17"],"mappings":"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","file":"static/js/17.b33a54ba.chunk.js","sourcesContent":["import queryString from 'query-string';\nimport { notification } from 'antd';\nimport projectService from '../../services/project';\nimport { notifyRequestError } from '../../utils';\n\n\nexport default {\n  namespace: 'project-users',\n  state: {\n    roles: undefined,\n    pageSize: 20,\n    list: [],\n    page: 1,\n    total: undefined,\n    loading: false,\n    info: undefined,\n    role: undefined,\n    saving: false,\n  },\n\n  subscriptions: {\n    setup({ dispatch, history }) {\n      return history.listen(({ pathname, search }) => {\n        const match = pathname.match(/^\\/projects\\/([\\w-]+)\\/users$/);\n        if (match) {\n          return dispatch({ type: 'init', payload: { projectName: match[1], search } });\n        }\n        const matchObj = pathname.match(/^\\/projects\\/([\\w-]+)\\/users\\/([\\w-]+)$/);\n        if (matchObj && 'add' !== matchObj[2]) {\n          return dispatch({ type: 'getUserInfo', payload: { projectName: match[1], username: match[2] } });\n        }\n      });\n    },\n  },\n\n  effects: {\n    *init({ payload }, { put }) {\n      const parsed = queryString.parse(payload.search);\n      const page = parseInt(parsed.page || 1, 10);\n      yield put({ type: 'save', payload: { page, list: [], total: undefined } });\n      yield put({ type: 'getUserRoles', payload });\n      yield put({ type: 'load', payload });\n    },\n    *getUserRoles({ payload }, { call, put, select }) {\n      const { roles } = yield select(state => state['project-users']);\n      if (roles && 0 < roles.length && payload.projectName === roles[0].project_name) {\n        return;\n      }\n      yield put({ type: 'save', payload: { roles: undefined } });\n      const { data, errMsg } = yield call(projectService.getProjectUserRoles, { projectName: payload.projectName });\n      yield put({ type: 'save', payload: { roles: data || null } });\n      if (errMsg) {\n        notifyRequestError(errMsg, '获取用户角色列表失败');\n      } else {\n        yield put({ type: 'mergeUserRoles' });\n      }\n    },\n    *load({ payload }, { call, put, select }) {\n      const { page, pageSize, loading } = yield select(state => state['project-users']);\n      if (loading) {\n        return;\n      }\n      yield put({ type: 'save', payload: { loading: true } });\n      const { data, errMsg } = yield call(projectService.getProjectUsers, {\n        start: (page - 1) * pageSize,\n        limit: pageSize,\n        projectName: payload.projectName,\n      });\n      yield put({ type: 'save', payload: { loading: false, list: (data && data.list) || null, total: (data && data.total) } });\n      if (errMsg) {\n        notifyRequestError(errMsg, '获取用户列表失败');\n      } else {\n        yield put({ type: 'mergeUserRoles' });\n      }\n    },\n    *mergeUserRoles({ payload }, { put, select }) {\n      const { roles, list } = yield select(state => state['project-users']);\n      if (!roles || !list || 0 === roles.length || 0 === list.length) {\n        return;\n      }\n      yield put({\n        type: 'save',\n        payload: {\n          list: list.map((it) => {\n            const info = roles.find(item => item.username === it.username);\n            return { ...it, role: info && info.role };\n          }),\n        },\n      });\n    },\n    *getUserInfo({ payload }, { put, select }) {\n      const { info, role } = yield select(state => state.projects);\n      if (!info || payload.username !== info.username) {\n        yield put({ type: 'refreshProjectInfo', payload });\n      }\n      if (!role || payload.projectName !== role.projectName || payload.username !== role.username) {\n        yield put({ type: 'refreshUserRole', payload });\n      }\n    },\n    *refreshUserInfo({ payload }, { call, put }) {\n      yield put({ type: 'save', payload: { info: undefined } });\n      const { data } = yield call(projectService.getProjectUserInfo, payload);\n      yield put({ type: 'save', payload: { info: data || null } });\n    },\n    *refreshUserRole({ payload }, { call, put }) {\n      yield put({ type: 'save', payload: { role: undefined } });\n      const { data } = yield call(projectService.getProjectUserRole, payload);\n      yield put({ type: 'save', payload: { role: data || null } });\n    },\n    *saveUserInfo({ payload }, { put, call }) {\n      yield put({ type: 'save', payload: { saving: true } });\n      const { errMsg } = yield call(projectService.updateProjectInfo, payload);\n      yield put({ type: 'save', payload: { saving: false } });\n      if (errMsg) {\n        notifyRequestError(errMsg, '修改商户信息失败');\n      } else {\n        yield put({ type: 'saveProjectInfo', payload });\n        notification.success({ message: '修改录像信息成功' });\n      }\n    },\n    *updateUserInfo({ payload }, { put, select }) {\n      const { info } = yield select(state => state.projects);\n      const { projectName, ...newData } = payload;\n      if (info && projectName === info.name) {\n        yield put({ type: 'save', payload: { info: { ...info, ...newData } } });\n      }\n    },\n  },\n\n  reducers: {\n    save(state, action) {\n      return { ...state, ...action.payload };\n    },\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/admin/projectUsers.js","\r\nimport resource from '../utils/resource';\r\n\r\nconst projects = () => {\r\n  return resource('/projects/:projectName/:resourcetype/:resourceId/:subType/:subId');\r\n};\r\n// const storageQuota = () => {\r\n//   return resource('/projects/:projectName/storage_quota');\r\n// };\r\n\r\nexport default {\r\n  async addVirtualCamera({ projectName, ...data }) {\r\n    return projects().post({ projectName, resourcetype: 'add_virtual_camera' }, data);\r\n  },\r\n  async getStorageQuota({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'storage_quota' });\r\n  },\r\n  async getProjects(params) {\r\n    return projects().get(params);\r\n  },\r\n  async getProjectInfo({ projectName }) {\r\n    return projects().get({ projectName });\r\n  },\r\n  async updateProjectInfo({ projectName, ...data }) {\r\n    return projects().put({ projectName }, data);\r\n  },\r\n  async getAccount({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'account' });\r\n  },\r\n  async getQuota({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'quota' });\r\n  },\r\n  async getOnlineSchoolConfig({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'online_school', resourceId: 'config' });\r\n  },\r\n  async getWechatMerchant({ projectName }) {\r\n    return projects().get({ projectName, resourcetype: 'wechat_merchant' });\r\n  },\r\n  async getProjectUsers(params) {\r\n    return projects().get({ ...params, resourcetype: 'users' });\r\n  },\r\n  async getProjectUserInfo({ projectName, username }) {\r\n    return projects().get({ projectName, resourcetype: 'users', resourceId: username });\r\n  },\r\n  async addProjectUser({ projectName, username, role }) {\r\n    return projects().post({ projectName, resourcetype: 'users' }, { username, role });\r\n  },\r\n  async removeProjectUser({ projectName, username }) {\r\n    return projects().remove({ projectName, resourcetype: 'users', resourceId: username });\r\n  },\r\n  async getProjectUserRoles(params) {\r\n    return projects().get({ ...params, resourcetype: 'user_roles' });\r\n  },\r\n  async getProjectUserRole({ projectName, username }) {\r\n    return projects().get({ projectName, resourcetype: 'user_roles', resourceId: username });\r\n  },\r\n  async updateProjectUserRole({ projectName, username, role }) {\r\n    return projects().put({ projectName, resourcetype: 'user_roles', resourceId: username }, { role });\r\n  },\r\n  async getProjectDevices(params) {\r\n    return projects().get({ ...params, resourcetype: 'devices' });\r\n  },\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/project.js"],"sourceRoot":""}