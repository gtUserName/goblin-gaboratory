webpackJsonp([2],{1437:function(t,e,r){"use strict";var n=r(262),a=r.n(n),o=r(507);function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function n(a,o){try{var s=e[a](o),u=s.value}catch(t){return void r(t)}if(!s.done)return Promise.resolve(u).then(function(t){n("next",t)},function(t){n("throw",t)});t(u)}("next")})}}var u=function(){return Object(o.a)("/projects/:projectName/live_shows/:showId/:type/:subId")},c=function(){return Object(o.a)("/projects/:projectName/live_show/:resourceType/:resourceId/live_shows")};e.a={getShows:function(){var t=s(a.a.mark(function t(e){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={projectName:e.projectName,start:e.start,limit:e.limit},"string"===typeof e.keyword&&""!==e.keyword&&(r.keyword=e.keyword),t.abrupt("return",u().get(r));case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getShow:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().get({projectName:r,showId:n}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getShowTags:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().get({projectName:r,showId:n,type:"tags"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getShowStatistic:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().get({projectName:r,showId:n,type:"statistic"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getLiveStatistics:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().get({projectName:r,showId:n,type:"lives"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getShowRecords:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().get({projectName:r,showId:n,type:"records"}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),removeShowRecord:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId,o=e.eventId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().remove({projectName:r,showId:n,type:"records",subId:o}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),addShowRecords:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId,o=e.events;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().post({projectName:r,showId:n,type:"records"},o));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getShowSchedules:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.start,o=e.limit;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c().get({projectName:r,resourceType:"live_show_schedules",start:n,limit:o}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getShowsByEvent:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.eventId;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c().get({projectName:r,resourceType:"events",resourceId:n}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),changeShowState:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId,o=e.op;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().post({projectName:r,showId:n},{op:o}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),updateShowInfo:function(){var t=s(a.a.mark(function t(e){var r=e.projectName,n=e.showId,o=function(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}(e,["projectName","showId"]);return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u().put({projectName:r,showId:n},o));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},497:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(262),a=r.n(n),o=r(265),s=r.n(o),u=r(1437),c=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default={namespace:"shows",state:{pageSize:20,list:[],page:1,total:void 0,keyword:void 0,loading:!1,info:void 0,tags:void 0,statistic:void 0},subscriptions:{setup:function(t){var e=t.dispatch;return t.history.listen(function(t){var r=t.pathname,n=r.match(/^\/p\/([\w-]+)\/shows$/);if(n)return e({type:"init",payload:n[1]});var a=r.match(/^\/p\/([\w-]+)\/shows\/([\w-]+)\//);return a?e({type:"getShowInfo",payload:{projectName:a[1],showId:a[2]}}):void 0})}},effects:{init:a.a.mark(function t(e,r){var n,o,u,c=e.payload,i=(r.call,r.put);r.select;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.a.parseUrl(window.location.href),o=n.query,u=parseInt(o.page||1,10),t.next=4,i({type:"save",payload:{keyword:o.keyword,page:u}});case 4:return t.next=6,i({type:"save",payload:{list:[],total:void 0}});case 6:return t.next=8,i({type:"load",payload:c});case 8:case"end":return t.stop()}},t,this)}),load:a.a.mark(function t(e,r){e.payload;var n,o,s,c,i,p,f,d,h=r.call,w=r.put,v=r.select;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(function(t){return t.shows});case 2:if(n=t.sent,o=n.page,s=n.pageSize,c=n.keyword,!n.loading){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,w({type:"save",payload:{loading:!0}});case 11:return t.next=13,v(function(t){return t.client});case 13:return i=t.sent,p=i.selected,t.next=17,h(u.a.getShows,{projectName:p,keyword:c,start:(o-1)*s,limit:s});case 17:return f=t.sent,d=f.data,f.err,t.next=22,w({type:"save",payload:{loading:!1}});case 22:if(!d){t.next=26;break}return t.next=26,w({type:"save",payload:{list:d.list,total:d.total}});case 26:case"end":return t.stop()}},t,this)}),getShowInfo:a.a.mark(function t(e,r){var n,o,s=e.payload,u=r.put,c=r.select;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(function(t){return t.shows});case 2:if(n=t.sent,(o=n.info)&&s.showId===o.uuid){t.next=7;break}return t.next=7,u({type:"refreshShowInfo",payload:s});case 7:case"end":return t.stop()}},t,this)}),refreshShowInfo:a.a.mark(function t(e,r){var n,o,s,i,p,f=e.payload,d=r.call,h=r.put;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({type:"save",payload:{info:void 0,tags:void 0,statistic:void 0}});case 2:return t.next=4,[d(u.a.getShow,f),d(u.a.getShowTags,f),d(u.a.getShowStatistic,f)];case 4:return n=t.sent,o=c(n,3),s=o[0],i=o[1],p=o[2],t.next=11,h({type:"save",payload:{info:s.data||null,tags:i.data||null,statistic:p.data||null}});case 11:case"end":return t.stop()}},t,this)})},reducers:{save:function(t,e){return Object.assign({},t,e.payload)}}}}});
//# sourceMappingURL=2.537b362a.chunk.js.map